\usepackage{amsthm}

\newtheoremstyle{plain}% name of the style to be used
  {5pt}% measure of space to leave above the theorem. E.g.: 3pt
  {5pt}% measure of space to leave below the theorem. E.g.: 3pt
  {\itshape}% name of font to use in the body of the theorem
  {}% measure of space to indent
  {\bfseries}% name of head font
  {:}% punctuation between head and body
  {.5em}% space after theorem head; " " = normal interword space
  {}% Manually specify head

\makeatletter
\renewenvironment{proof}[1][\proofname]{\par
    \pushQED{\qed}%
    \normalfont \topsep6\p@\@plus6\p@\relax
    \trivlist
    \item[\hskip\labelsep
        \itshape
        #1\@addpunct{.} ]\mbox{}\par\nobreak}
    {\popQED\endtrivlist\@endpefalse}
\makeatother

\newtheorem{theorem}{Theorem}[chapter]
\newtheorem{corollary}{Corollary}[theorem]
\newtheorem{lemma}[theorem]{Lemma}
\newtheorem{definition}{Definition}[chapter]
\newtheorem{problem}{Problem}[chapter]
\newtheorem{proposition}[theorem]{Proposition}
\newtheorem{principle}{Principle}
\newtheorem{example}{Example}[chapter]
\newtheorem{algorithm}{Algorithm}

\theoremstyle{remark}
\newtheorem*{claim}{Claim}

\usepackage{etoolbox}% http://ctan.org/pkg/etoolbox
\usepackage{needspace}% http://ctan.org/pkg/needspace
\AtBeginEnvironment{theorem}{\Needspace{5\baselineskip}}
\AtBeginEnvironment{lemma}{\Needspace{5\baselineskip}}
\AtBeginEnvironment{definition}{\Needspace{5\baselineskip}}
\AtBeginEnvironment{proof}{\Needspace{5\baselineskip}}


% Basic commands
\newcommand{\NN}{\mathbb{N}}
\newcommand{\ZZ}{\mathbb{Z}}
\newcommand{\RR}{\mathbb{R}}
\newcommand{\CC}{\mathbb{C}}
\newcommand{\BB}{\mathbb{B}}
\newcommand{\norm}[1]{\left\lVert#1\right\rVert}
\newcommand{\set}[2]{\left\{ #1 \;:\; #2 \right\}}
